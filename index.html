<!DOCTYPE HTML>
<html lang="it">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&amp;display=swap" rel="stylesheet">
<title>Lista Nascita di Beatrice - Farmacroce</title>
<style>
    :root{
      --accent:#d47fa6;
      --muted:#6b7280;
      --card-bg:#ffffff;
      --page-bg:#f6f7fb;
      --success:#16a34a;
    }
    html,body{height:100%;}
    body {
      font-family: 'Inter', system-ui, -apple-system, 'Segoe UI', Roboto, 'Helvetica Neue', Arial;
      background: var(--page-bg);
      margin:0; padding:24px; color:#111827;
    }
    .site-header{max-width:1100px;margin:0 auto 18px;padding:12px 6px;text-align:center}
    .logo{max-width:180px;display:inline-block}
    .header-top{display:flex;align-items:center;justify-content:center;gap:12px}
    .social a{color:var(--muted);text-decoration:none}
    .social svg{width:28px;height:28px;vertical-align:middle}
    h1{color:var(--accent);margin:6px 0 4px;font-weight:700}
    p.lead{color:var(--muted);margin-top:0}

    .container{max-width:1100px;margin:0 auto;display:block}
    .main{display:flex;gap:32px;align-items:flex-start}
     /* Griglia prodotti: tre card per riga su desktop, responsive a 2/1 su schermi piccoli
       Layout fisso a 3 colonne con celle di uguale altezza per allineare le righe */
     .products-grid{flex:1;display:grid;grid-template-columns:repeat(3,1fr);gap:24px;align-items:start;justify-items:stretch}

     /* Assicura che ogni prodotto riempia la sua cella */
     .products-grid > .product{width:100%}

     /* Card prodotto: altezza fissa per uniformare tutte le card */
     .product{background:var(--card-bg);border-radius:10px;padding:16px;border:1px solid #e6e9ef;box-shadow:0 2px 6px rgba(16,24,40,0.03);display:flex;flex-direction:column;justify-content:space-between;height:420px;overflow:hidden}
     .product img{width:100%;height:150px;object-fit:contain;border-radius:6px;margin-bottom:10px}
     .product h3{margin:6px 0}
     .product .desc{min-height:48px;display:-webkit-box;-webkit-line-clamp:3;-webkit-box-orient:vertical;overflow:hidden;text-overflow:ellipsis;line-height:1.2rem;max-height:3.6rem;transition:max-height .18s ease}
    .product .desc.expanded{display:block;overflow:visible;max-height:9999px;-webkit-line-clamp:unset}
    /* Quando la descrizione si espande, permetti alla card di crescere */
    .product:has(.desc.expanded){max-height:none;overflow:visible;height:auto}
    .more-btn{background:none;border:none;color:var(--accent);cursor:pointer;padding:6px 0;font-weight:600}
    .product .meta{margin-top:4px}
    .product .add-btn{margin-top:auto}

    /* Regola i breakpoint per mantenere 3 colonne su schermi medi; passa a 2 colonne
       sotto 768px e a 1 colonna sotto 480px */
    @media (max-width: 768px) {
      .products-grid{grid-template-columns:repeat(2,1fr)}
      .product img{height:140px}
    }

    /* Ottimizzazioni mobile: target touch piÃ¹ grandi, header compatto e spaziature */
    @media (max-width: 480px) {
      body{padding:12px}
      .site-header{padding:8px 6px;text-align:left}
      .logo{max-width:140px}
      .header-top{justify-content:space-between;align-items:center;gap:8px}
      .social svg{width:32px;height:32px}
      .products-grid{gap:12px;grid-template-columns:1fr;grid-auto-rows:auto}
      /* permetti overflow completo su schermi piccoli cosÃ¬ immagini e descrizioni espanse sono visibili */
      .product{max-height:none!important;overflow:visible!important;height:auto!important;min-height:auto!important}
      .product img, .product-img, img.product-img{
        height:200px!important;
        min-height:200px!important;
        width:100%!important;
        display:block!important;
        object-fit:contain!important;
        visibility:visible!important;
        opacity:1!important;
        margin-bottom:10px!important;
      }
      .product h3{font-size:1rem}
      .product .desc{-webkit-line-clamp:4}
      .product .add-btn{padding:12px;font-size:1rem;border-radius:8px}
      .cart{width:100%;margin-top:12px}
      #cart .cart-item .left strong{font-size:0.95rem}
    }
    .product h3{margin:0 0 6px;font-size:1.05rem}
    .product p{margin:4px 0;color:var(--muted)}
    .stock{font-size:0.95rem}
    .product .add-btn{width:100%;display:inline-block;padding:10px;border-radius:8px;background:var(--accent);color:#fff;border:none;cursor:pointer;font-weight:600}
    .product .add-btn[disabled]{opacity:0.7}

    .product .desc{color:#374151;margin:8px 0 6px;font-size:0.95rem}
    .product .meta{display:block;color:#6b7280;font-size:0.85rem}
    .product .price{font-weight:600;color:#111827;font-size:1.1rem;margin:8px 0}

    .cart{width:320px;background:linear-gradient(180deg,#ffffff,#fbfdff);border-radius:10px;padding:14px;border:1px solid #e2e8f0;box-shadow:0 6px 18px rgba(15,23,42,0.06)}
    .cart h2{margin:0 0 10px}
    #cart{list-style:none;padding:0;margin:0 0 12px}
    #cart li{margin:0;padding:0}
    /* layout elementi carrello */
    .cart .total{display:flex;align-items:center;justify-content:space-between;font-size:1.05rem;margin-top:8px}
    .cart button{border-radius:8px}
    #cart .cart-item{display:flex;justify-content:space-between;align-items:center;padding:8px;border-bottom:1px solid #e6e9ef}
    #cart .cart-item .left{max-width:68%;overflow:hidden}
    #cart .cart-item .left strong{display:block;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}
    #cart .cart-item .left small{color:var(--muted);display:block}
    #cart .cart-item .controls{display:flex;gap:6px;align-items:center}
    #cart .cart-item .controls button{padding:6px 8px;border-radius:6px;border:none;background:#f3f4f6;cursor:pointer;color:#111}
    #cart .cart-item .controls button:hover{filter:brightness(.95)}
    #cart .cart-item .controls .qty-btn{width:34px;height:34px;display:inline-flex;align-items:center;justify-content:center;padding:0}
    #cart .cart-item .controls .remove-btn{background:#ef4444;color:#fff}
    /* Logo PayPal accanto al totale */
    .cart .total img{display:inline-block;margin-left:8px;height:28px;vertical-align:middle}

    #paypal-button-container{margin-top:10px}
    #paypal-mark{transition:opacity .2s}

    /* Lightbox (galleria immagini) */
    .lightbox{position:fixed;inset:0;display:flex;align-items:center;justify-content:center;background:rgba(2,6,23,0.6);z-index:9999;opacity:0;pointer-events:none;transition:opacity .18s}
    .lightbox.open{opacity:1;pointer-events:auto}
    .lightbox-content{max-width:92%;max-height:92%;border-radius:8px;overflow:hidden;box-shadow:0 10px 40px rgba(2,6,23,0.6);background:#fff;padding:6px}
    .lightbox-content img{display:block;max-width:100%;max-height:80vh;object-fit:contain}
    .lightbox-close{position:absolute;top:18px;right:20px;background:rgba(255,255,255,0.9);border-radius:999px;padding:6px 8px;cursor:pointer;font-weight:700}

    @media(max-width:880px){
      .main{flex-direction:column}
      .cart{width:100%}
    }
 </style>
</head>
<body>
<!-- Intestazione (logo inserito nella sezione header sotto) -->

    <!-- Nota: mettere le immagini prodotto nella cartella `img/` con i nomi suggeriti.
      Esempi: `img/crema-idratante-baby.jpg`, `img/set-biberon.jpg`, `img/pannolini-bio.jpg` -->
  <div class="site-header">
    <div class="header-top">
      <img class="logo" src="Logo.jpg" alt="Logo Farmacroce">
      <div class="social" aria-hidden="false">
        <a href="fb://profile/61560597388942" target="_blank" rel="noopener" aria-label="Pagina Facebook Farmacroce" onclick="event.preventDefault(); window.location='fb://profile/61560597388942'; setTimeout(function(){window.location='https://www.facebook.com/people/Farmacroce-Rossi/61560597388942/';},500);">
          <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" style="fill:#1877F2">
            <path d="M22 12a10 10 0 1 0-11.5 9.9v-7H8.5v-3h2v-2.3c0-2 1.2-3.1 3-3.1.9 0 1.8.1 1.8.1v2h-1c-1 0-1.3.6-1.3 1.2V12h2.2l-.4 3h-1.8v7A10 10 0 0 0 22 12z"/>
          </svg>
        </a>
        <a href="instagram://user?username=Farmacroce" target="_blank" rel="noopener" aria-label="Pagina Instagram Farmacroce" onclick="event.preventDefault(); window.location='instagram://user?username=Farmacroce'; setTimeout(function(){window.location='https://www.instagram.com/Farmacroce';},500);">
          <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img">
            <defs>
              <linearGradient id="instaGrad" x1="0" y1="0" x2="1" y2="1">
                <stop offset="0%" stop-color="#f58529"/>
                <stop offset="50%" stop-color="#dd2a7b"/>
                <stop offset="100%" stop-color="#8134af"/>
              </linearGradient>
            </defs>
            <path fill="url(#instaGrad)" d="M7 2h10a5 5 0 0 1 5 5v10a5 5 0 0 1-5 5H7a5 5 0 0 1-5-5V7a5 5 0 0 1 5-5zm5 6.2A4.8 4.8 0 1 0 16.8 13 4.8 4.8 0 0 0 12 8.2zm6.4-2.6a1.1 1.1 0 1 0 1.1 1.1 1.1 1.1 0 0 0-1.1-1.1zM12 10.6A1.4 1.4 0 1 1 10.6 12 1.4 1.4 0 0 1 12 10.6z"/>
          </svg>
        </a>
      </div>
    </div>
    <h1>ðŸŽ€ Lista Nascita di Catalano Rossi ðŸŽ€</h1>
    <p class="lead">Benvenuti nella lista nascita di Catalano Rossi presso la Parafarmacia Farmacroce!</p>
  </div>

  <div class="container">
    <div class="main">
      <div id="products" class="products-grid">
        <div class="product" data-product="Zaino Mustela" data-price="45.00" data-stock="1">
          <img class="product-img" src="Zaino-Mustela.jpg" alt="Zaino Mustela" style="cursor: zoom-in;">
          <h3>Zaino Mustela</h3>
          <p class="desc">Contenuto: Fluido detergente senza risciaquo 300ml, Detergente delicato 200ml, Hydra bÃ©bÃ¨ crema viso 40 ml, Pasta cambio 50ml.</p>
          <p class="price">Prezzo: â‚¬45.00</p>
          <small class="meta">Marca: Mustela</small>
          <p class="stock">Disponibili: 1</p>
          <button class="add-btn" onclick="addToCart('Zaino Mustela', 45.00)">Aggiungi al carrello</button>
        </div>
          <!-- Chicco soluzione rimossa come richiesto -->

        <div class="product" data-product="Organizer passeggino" data-price="25.00" data-stock="1" data-sku="MU-002" data-brand="Mustela">
          <img class="product-img" src="Organizer-passeggino.jpg" alt="Organizer passeggino" style="cursor: zoom-in;">
          <h3>Organizer passeggino</h3>
          <p class="desc">Pratico organizer da agganciare al passeggino con tasche multiple per biberon, pannolini e accessori. Contenuto: Bagnetto mille bolle 200ml, Shampoo dolce 200ml.</p>
          <p class="price">Prezzo: â‚¬25.00</p>
          <small class="meta">Marca: Mustela</small>
          <p class="stock">Disponibili: 1</p>
          <button class="add-btn" onclick="addToCart('Organizer passeggino', 25.00)">Aggiungi al carrello</button>
        </div>

        <div class="product" data-product="Scatola in latta Mustela" data-price="15.00" data-stock="1" data-sku="MU-003" data-brand="Mustela">
          <img class="product-img" src="Scatola-in-latta.jpg" alt="Scatola in latta Mustela" style="cursor: zoom-in;">
          <h3>Scatola in latta Mustela</h3>
          <p class="desc">Scatola in latta con design elegante, perfetta per confezionare piccoli regali o conservare accessori per il neonato. Contenuto: Detergente delicato 200ml, Hydra bÃ©bÃ¨ viso 40ml.</p>
          <p class="price">Prezzo: â‚¬15.00</p>
          <small class="meta">Marca: Mustela</small>
          <p class="stock">Disponibili: 1</p>
          <button class="add-btn" onclick="addToCart('Scatola in latta Mustela', 15.00)">Aggiungi al carrello</button>
        </div>

        <div class="product" data-product="Set Mustela crema solare con borsa frigo" data-price="25.00" data-stock="1" data-sku="MU-002" data-brand="Mustela">
          <img class="product-img" src="Mustela-borsa-frigo.jpg" alt="Set Mustela crema solare con borsa frigo" style="cursor: zoom-in;">
          <h3>Set Mustela crema solare con borsa frigo</h3>
          <p class="desc">Mustela Kit Solare per tutta la famiglia comprende lo Spray Latte Solare SPF50 da 200ml e la pratica Borsa Frigo in R-pet certificato da portare sempre con te</p>
          <p class="price">Prezzo: â‚¬25.00</p>
          <small class="meta">Marca: Mustela</small>
          <p class="stock">Disponibili: 1</p>
          <button class="add-btn" onclick="addToCart('Set Mustela crema solare con borsa frigo', 25.00)">Aggiungi al carrello</button>
        </div>

        <div class="product" data-product="Bagno corpo Mustela da 150 ml" data-price="18.00" data-stock="1" data-sku="MU-002" data-brand="Mustela">
          <img class="product-img" src="Bagno-corpo-Mustela.jpg" alt="Bagno corpo Mustela da 150 ml" style="cursor: zoom-in;">
          <h3>Bagno corpo Mustela da 150 ml</h3>
          <p class="desc">Mustela Detergente Delicato Corpo e Capelli Ã¨ formulato per la detersione delicata di corpo e capelli, utilizzabile fin dalla nascita.</p>
          <p class="price">Prezzo: â‚¬18.00</p>
          <small class="meta">Marca: Mustela</small>
          <p class="stock">Disponibili: 1</p>
          <button class="add-btn" onclick="addToCart('Bagno corpo Mustela da 150 ml', 18.00)">Aggiungi al carrello</button>
        </div>

        <div class="product" data-product="Mustela acqua detergente 300ml" data-price="14.00" data-stock="1" data-sku="MU-002" data-brand="Mustela">
          <img class="product-img" src="Mustela acqua.jpg" alt="Mustela acqua detergente 300ml" style="cursor: zoom-in;">
          <h3>Mustela acqua detergente 300ml</h3>
          <p class="desc">Acqua detergente con avocado biologico Ã¨ il modo per rinfrescare rapidamente la pelle del vostro piccolo, senza risciacquo, senza residui appiccicosi.</p>
          <p class="price">Prezzo: â‚¬14.00</p>
          <small class="meta">Marca: Mustela</small>
          <p class="stock">Disponibili: 1</p>
          <button class="add-btn" onclick="addToCart('Mustela acqua detergente 300ml', 14.00)">Aggiungi al carrello</button>
        </div>
        
        <div class="product" data-product="Stick Mustela labbra" data-price="7.00" data-stock="0" data-sku="MU-002" data-brand="Mustela">
          <img class="product-img" src="Stick-labbra.jpg" alt="Stick Mustela labbra" style="cursor: zoom-in;">
          <h3>Stick Mustela labbra</h3>
          <p class="desc">Labbra e zigomi sono spesso soggetti a secchezza e irritazioni dovute a condizioni climatiche difficili come vento, freddo o sbalzi di temperatura. Queste zone del viso, piÃ¹ esposte, necessitano di protezione e nutrimento per mantenere l'elasticitÃ  della pelle e prevenire screpolature e arrossamenti.</p>
          <p class="price">Prezzo: â‚¬7.00</p>
          <small class="meta">Marca: Mustela</small>
          <p class="stock">Disponibili: 0</p>
          <button class="add-btn" onclick="addToCart('Stick Mustela labbra', 7.00)" disabled>Aggiungi al carrello</button>
        </div>

        <div class="product" data-product="Crema solare 50+" data-price="19.00" data-stock="1" data-sku="MU-002" data-brand="BioNike">
          <img class="product-img" src="Crema-solare-50plus.jpg" alt="Crema solare 50+" style="cursor: zoom-in;">
          <h3>Crema solare 50+</h3>
          <p class="desc">Offre una tripla fotoprotezione: difesa ad ampio spettro dai raggi UVA-UVB, protezione dai radicali liberi generati dai raggi IR e prevenzione dei danni biologici a lungo termine grazie al PRO-REPAIR Complex.</p>
          <p class="price">Prezzo: â‚¬19.00</p>
          <small class="meta">Marca: BioNike</small>
          <p class="stock">Disponibili: 1</p>
          <button class="add-btn" onclick="addToCart('Crema solare 50+', 19.00)">Aggiungi al carrello</button>
        </div>

        <div class="product" data-product="Repellente zanzare" data-price="13.00" data-stock="1" data-sku="MU-002" data-brand="Mustela">
          <img class="product-img" src="Mustela zanzare.jpg" alt="Repellente zanzare" style="cursor: zoom-in;">
          <h3>Repellente zanzare</h3>
          <p class="desc">Durata fino a 8 ore di protezione contro zanzare, zanzare tigre e fino a 7 ore di protezione contro le zecche senza profumo e senza alcol.</p>
          <p class="price">Prezzo: â‚¬13.00</p>
          <small class="meta">Marca: Mustela</small>
          <p class="stock">Disponibili: 1</p>
          <button class="add-btn" onclick="addToCart('Repellente zanzare', 13.00)">Aggiungi al carrello</button>
        </div>

        <div class="product" data-product="Dissuasore zanzare portatile" data-price="15.00" data-stock="1" data-sku="MU-002" data-brand="Chicco">
          <img class="product-img" src="Dissuasore.jpg" alt="Dissuasore zanzare portatile" style="cursor: zoom-in;">
          <h3>Dissuasore zanzare portatile</h3>
          <p class="desc">Il dispositivo antizanzare portatile di Chicco utilizza gli ultrasuoni allâ€™aria aperta e si installa facilmente con una pratica clip da agganciare alla carrozzina o al passeggino. Privo di effetti indesiderati e totalmente sicuro anche per i piÃ¹ piccoli, lâ€™antizanzare portatile a ultrasuoni Chicco funziona con batteria alcalina da 1.5 V della durata di circa 100 ore.</p>
          <p class="price">Prezzo: â‚¬15.00</p>
          <small class="meta">Marca: Chicco</small>
          <p class="stock">Disponibili: 1</p>
          <button class="add-btn" onclick="addToCart('Dissuasore zanzare portatile', 15.00)">Aggiungi al carrello</button>
        </div>

        <div class="product" data-product="Zanzariera Chicco per passeggino" data-price="10.00" data-stock="1" data-sku="CH-003" data-brand="Chicco">
          <img class="product-img" src="Zanzariera-Chicco.jpg" alt="Zanzariera Chicco per passeggino" style="cursor: zoom-in;">
          <h3>Zanzariera Chicco per passeggino</h3>
          <p class="desc">Zanzariera Chicco utilissima per proteggere il passeggino dalle zanzare.</p>
          <p class="price">Prezzo: â‚¬10.00</p>
          <small class="meta">Marca: Chicco</small>
          <p class="stock">Disponibili: 1</p>
          <button class="add-btn" onclick="addToCart('Zanzariera Chicco per passeggino', 10.00)">Aggiungi al carrello</button>
        </div>

        <div class="product" data-product="Fascia porta bimbo Chicco" data-price="70.00" data-stock="1" data-sku="CH-004" data-brand="Chicco">
          <img class="product-img" src="Fascia-porta-bimbo.jpg" alt="Fascia porta bimbo Chicco" style="cursor: zoom-in;">
          <h3>Fascia porta bimbo Chicco</h3>
          <p class="desc">Chicco Boppy Comfyfit PortabebÃ¨ BL: avvolge il bambino in un abbraccio confortevole. Facile da indossare, leggero e pratico, ideale per la vita di tutti i giorni. Lavabile in lavatrice.</p>
          <p class="price">Prezzo: â‚¬70.00</p>
          <small class="meta">Marca: Chicco</small>
          <p class="stock">Disponibili: 1</p>
          <button class="add-btn" onclick="addToCart('Fascia porta bimbo Chicco', 70.00)">Aggiungi al carrello</button>
        </div>

        <div class="product" data-product="Giostrina Next to Dreams Chicco" data-price="35.00" data-stock="1" data-sku="CH-005" data-brand="Chicco">
          <img class="product-img" src="Giostrina-Chicco.png" alt="Giostrina Next to Dreams Chicco" style="cursor: zoom-in;">
          <h3>Giostrina Next to Dreams Chicco</h3>
          <p class="desc">La Chicco Next2Dreams Neutra Ã¨ una giostrina musicale progettata per adattarsi alla culla Next2Me e alla maggior parte dei lettini in legno. Creata per allietare il sonno del tuo bambino, offre 20 minuti di dolce musica classica (Chopin, Schumann, Offenbach) e suoni bianchi calmanti, simili a quelli percepiti nel grembo materno. Decorata con 4 pendenti in tessuto anallergico e dotata di una luce soffusa integrata, la giostrina favorisce un'atmosfera rilassante senza dover accendere la luce principale.</p>
          <p class="price">Prezzo: â‚¬35.00</p>
          <small class="meta">Marca: Chicco</small>
          <p class="stock">Disponibili: 1</p>
          <button class="add-btn" onclick="addToCart('Giostrina Next to Dreams Chicco', 35.00)">Aggiungi al carrello</button>
        </div>

        <div class="product" data-product="Giraffa Chicco" data-price="20.00" data-stock="1" data-sku="CH-006" data-brand="Chicco">
          <img class="product-img" src="Chicco-Giraffa.jpg?v=2" alt="Giraffa Chicco" style="cursor: zoom-in;">
          <h3>Giraffa Chicco</h3>
          <p class="desc">La Fune Passeggio Mrs Giraffa Ã¨ realizzata in morbido tessuto ed Ã¨ ricca di attivitÃ  manuali per intrattenere il bambino sia durante gli spostamenti all'aria aperta che in casa. Facile da agganciare alla barra del passeggino.</p>
          <p class="price">Prezzo: â‚¬20.00</p>
          <small class="meta">Marca: Chicco</small>
          <p class="stock">Disponibili: 1</p>
          <button class="add-btn" onclick="addToCart('Giraffa Chicco', 20.00)">Aggiungi al carrello</button>
        </div>

        <div class="product" data-product="Set igiene panda" data-price="10.00" data-stock="1" data-sku="CH-007" data-brand="Chicco">
          <img class="product-img" src="Set-igiene-panda.jpg" alt="Set igiene panda" style="cursor: zoom-in;">
          <h3>Set igiene panda</h3>
          <p class="desc">Il Chicco Set Mani Rigido Panda Ã¨ un kit completo pensato per tutti i genitori che desiderano prendersi cura dell'igiene e della cura delle unghie dei propri bambini in modo sicuro e delicato, fin dalla nascita.</p>
          <p class="price">Prezzo: â‚¬10.00</p>
          <small class="meta">Marca: Chicco</small>
          <p class="stock">Disponibili: 1</p>
          <button class="add-btn" onclick="addToCart('Set igiene panda', 10.00)">Aggiungi al carrello</button>
        </div>

        <div class="product" data-product="Set spazzola e pettine Chicco" data-price="10.00" data-stock="1" data-sku="CH-008" data-brand="Chicco">
          <img class="product-img" src="Set-spazzola-chicco.jpg" alt="Set spazzola e pettine Chicco" style="cursor: zoom-in;">
          <h3>Set spazzola e pettine Chicco</h3>
          <p class="desc">Set spazzola e pettine Chicco per la cura delicata dei capelli del bambino. Spazzola con setole morbide e pettine con denti arrotondati, ideali fin dalla nascita.</p>
          <p class="price">Prezzo: â‚¬10.00</p>
          <small class="meta">Marca: Chicco</small>
          <p class="stock">Disponibili: 1</p>
          <button class="add-btn" onclick="addToCart('Set spazzola e pettine Chicco', 10.00)">Aggiungi al carrello</button>
        </div>

        <div class="product" data-product="Carillon Chicco a forma di luna" data-price="15.00" data-stock="1" data-sku="CH-009" data-brand="Chicco">
          <img class="product-img" src="Carillon-Chicco.jpg" alt="Carillon Chicco a forma di luna" style="cursor: zoom-in;">
          <h3>Carillon Chicco a forma di luna</h3>
          <p class="desc">Carillon Chicco a forma di luna, perfetto per cullare dolcemente il tuo bambino con melodie rilassanti e luci soffuse.</p>
          <p class="price">Prezzo: â‚¬15.00</p>
          <small class="meta">Marca: Chicco</small>
          <p class="stock">Disponibili: 1</p>
          <button class="add-btn" onclick="addToCart('Carillon Chicco a forma di luna', 15.00)">Aggiungi al carrello</button>
        </div>

        <div class="product" data-product="Massaggia gengive Chicco refrigerante" data-price="10.00" data-stock="1" data-sku="CH-010" data-brand="Chicco">
          <img class="product-img" src="Massaggia-gengive.jpg" alt="Massaggia gengive Chicco refrigerante" style="cursor: zoom-in;">
          <h3>Massaggia gengive Chicco refrigerante</h3>
          <p class="desc">Massaggia gengive Chicco refrigerante, ideale per alleviare il fastidio della dentizione nei neonati.</p>
          <p class="price">Prezzo: â‚¬10.00</p>
          <small class="meta">Marca: Chicco</small>
          <p class="stock">Disponibili: 1</p>
          <button class="add-btn" onclick="addToCart('Massaggia gengive Chicco refrigerante', 10.00)">Aggiungi al carrello</button>
        </div>

        <div class="product" data-product="Chicco Gioco Orsetto Sweet Heart Rosa" data-price="25.00" data-stock="1" data-sku="CH-011" data-brand="Chicco">
          <img class="product-img" src="Orso-proiettore-luce.jpg" alt="Chicco Gioco Orsetto Sweet Heart Rosa" style="cursor: zoom-in;">
          <h3>Chicco Gioco Orsetto Sweet Heart Rosa</h3>
          <p class="desc">L'Orsetto Sweet Heart di Chicco Ã¨ molto piÃ¹ di un semplice giocattolo: Ã¨ un tenero compagno che accompagnerÃ  il tuo bambino nelle sue prime scoperte.</p>
          <p class="price">Prezzo: â‚¬25.00</p>
          <small class="meta">Marca: Chicco</small>
          <p class="stock">Disponibili: 1</p>
          <button class="add-btn" onclick="addToCart('Chicco Gioco Orsetto Sweet Heart Rosa', 25.00)">Aggiungi al carrello</button>
        </div>

        <div class="product" data-product="Set dentifricio spazzolino Chicco" data-price="10.00" data-stock="1" data-sku="CH-012" data-brand="Chicco">
          <img class="product-img" src="Set-dentifricio-spazzolino.jpg" alt="Set dentifricio spazzolino Chicco" style="cursor: zoom-in;">
          <h3>Set dentifricio spazzolino Chicco</h3>
          <p class="desc">Il Set Primi Dentini di Chicco Ã¨ una pratica ed elegante custodia con cerniera per l'igiene orale in movimento. L'astuccio contiene un dentifricio al gusto mela banana (6-24 mesi) e uno spazzolino (6-36 mesi) con setole morbide.</p>
          <p class="price">Prezzo: â‚¬10.00</p>
          <small class="meta">Marca: Chicco</small>
          <p class="stock">Disponibili: 1</p>
          <button class="add-btn" onclick="addToCart('Set dentifricio spazzolino Chicco', 10.00)">Aggiungi al carrello</button>
        </div>

        <div class="product" data-product="Gel gengivale Chicco + massaggia gengive da dito" data-price="13.00" data-stock="1" data-sku="CH-013" data-brand="Chicco">
          <img class="product-img" src="set-gengive.jpg" alt="Gel gengivale Chicco + massaggia gengive da dito" style="cursor: zoom-in;">
          <h3>Gel gengivale Chicco + massaggia gengive da dito</h3>
          <p class="desc">Set per l'igiene orale dei bambini indicato dai 4m+</p>
          <p class="price">Prezzo: â‚¬13.00</p>
          <small class="meta">Marca: Chicco</small>
          <p class="stock">Disponibili: 1</p>
          <button class="add-btn" onclick="addToCart('Gel gengivale Chicco + massaggia gengive da dito', 13.00)">Aggiungi al carrello</button>
        </div>

        <div class="product" data-product="Dentinale" data-price="13.00" data-stock="1" data-sku="CH-014" data-brand="Prodotto farmaceutico">
          <img class="product-img" src="dentinale.jpg" alt="Dentinale" style="cursor: zoom-in;">
          <h3>Dentinale</h3>
          <p class="desc">DENTINALE pasta gengivale si usa per il trattamento dei dolori alle gengive per la nascita dei primi denti dei bambini (eruzioni dolorose dei denti nella prima infanzia).</p>
          <p class="price">Prezzo: â‚¬13.00</p>
          <small class="meta">Marca: Prodotto farmaceutico</small>
          <p class="stock">Disponibili: 1</p>
          <button class="add-btn" onclick="addToCart('Dentinale', 13.00)">Aggiungi al carrello</button>
        </div>

        <div class="product" data-product="Seggiolino auto Chicco Quizy" data-price="95.00" data-stock="1" data-sku="CH-015" data-brand="Chicco">
          <img class="product-img" src="Seggiolino-Chicco.jpg" alt="Seggiolino auto Chicco Quizy" style="cursor: zoom-in;">
          <h3>Seggiolino auto Chicco Quizy</h3>
          <p class="desc">Rialzo auto con schienale ultra-leggero (solo 4,5 kg) che rende semplice il trasferimento tra diverse auto. Compatibile con auto con e senza ganci Isofix. L'Easy-Extend Headrest System Ã¨ progettato per regolare facilmente il seggiolino, permettendo di adattarsi all'altezza crescente del bambino e garantendo una adattabilitÃ  perfetta fino a 12 anni. Massimo comfort a bordo grazie alle 2 posizioni di reclinazione, che permettono di personalizzare l'angolo della seduta garantendo un viaggio piÃ¹ rilassante e piacevole per il bambino. La seduta ed i braccioli imbottiti e morbidi offrono un comfort extra garantendo inoltre un supporto migliorato per tenere il bambino saldamente in posizione.</p>
          <p class="price">Prezzo: â‚¬95.00</p>
          <small class="meta">Marca: Chicco</small>
          <p class="stock">Disponibili: 1</p>
          <button class="add-btn" onclick="addToCart('Seggiolino auto Chicco Quizy', 95.00)">Aggiungi al carrello</button>
        </div>

        <div class="product" data-product="Seggiolino auto Chicco Fold & Go" data-price="170.00" data-stock="1" data-sku="CH-016" data-brand="Chicco">
          <img class="product-img" src="Seggiolino-Chicco2.png" alt="Seggiolino auto Chicco Fold & Go" style="cursor: zoom-in;">
          <h3>Seggiolino auto Chicco Fold & Go</h3>
          <p class="desc">Chicco Fold & Go i-Size - il seggiolino auto che cresce con il tuo bambino Fold & Go i-Size Ã¨ il seggiolino auto chicco che accompagnerÃ  il tuo bambino nel lungo viaggio di crescita da circa 3 a 12 anni (15 a 36 kg). Approvato secondo la norma i-Size (ECE R129/03) per il trasporto in auto di bambini di altezza compresa tra 100 e 150 cm. L'altezza e la larghezza sono regolabili indipendentemente, a seconda della crescita del bambino, per garantire un comfort, uno spazio e una protezione ottimali. Lo schienale puÃ² essere regolato in 4 posizioni, il che lo rende ideale per i lunghi viaggi. Installazione facile con i connettori Isofix e le cinture di sicurezza a 3 punti. Le maniglie di regolazione sul poggiatesta permettono una regolazione pratica e veloce in qualsiasi situazione. Grazie al suo sistema di chiusura, il seggiolino Fold & Go i-Size Ã¨ facile da trasportare e riporre in auto quando non Ã¨ in uso. Per garantire la massima sicurezza in caso di impatto laterale, Ã¨ dotato di un sistema di protezione laterale aggiuntivo e rimovibile che si collega al guscio esterno del sedile. Nella collezione Air, il seggiolino Ã¨ dotato di uno speciale tessuto a rete 3D nelle zone in cui il bambino suda rapidamente.</p>
          <p class="price">Prezzo: â‚¬170.00</p>
          <small class="meta">Marca: Chicco</small>
          <p class="stock">Disponibili: 1</p>
          <button class="add-btn" onclick="addToCart('Seggiolino auto Chicco Fold & Go', 170.00)">Aggiungi al carrello</button>
        </div>
      </div>

      <aside class="cart">
        <h2>ðŸ›’ Carrello</h2>
        <ul id="cart"><li style="color: #999;">Carrello vuoto</li></ul>
        <div class="total">
          <strong>Totale: â‚¬<span id="total">0.00</span></strong>
          <img id="paypal-mark" src="paypal.png" alt="PayPal" style="display: none; height: 28px; vertical-align: middle; margin-left: 8px; cursor: pointer;" onclick="document.getElementById('paypal-button-container').scrollIntoView({behavior:'smooth'});">
        </div>
        <!-- Bottone PayPal -->
        <div id="paypal-button-container" style="display: none;"></div>
      </aside>
    </div>
  </div>

  <!-- Lightbox markup -->
  <div id="lightbox" class="lightbox" role="dialog" aria-hidden="true">
    <div class="lightbox-content">
      <button id="lightbox-close" class="lightbox-close" aria-label="Chiudi">âœ•</button>
      <img id="lightbox-img" src="" alt="">
    </div>
  </div>

  <!-- PayPal SDK - IMPORTANTE: Sostituisci 'YOUR-CLIENT-ID' con il tuo Client ID reale da PayPal Dashboard
       Per ottenere il Client ID: https://developer.paypal.com/ > My Apps & Credentials > Live > Create App -->
  <script src="https://www.paypal.com/sdk/js?client-id=AdAPX2hi2eW_ekYfHQ4UpLXHiXX25WW5JUQEr6P9wcep-nYTGEm0hJaeBTE_jNNJnT7pBKdxEmjegTE_&amp;currency=EUR"></script>
  <!-- MODALITÃ€ TEST (attualmente attiva): -->
  <!-- <script src="https://www.paypal.com/sdk/js?client-id=sb&amp;currency=EUR"></script> -->
  <script>
    let cart = [];
    const products = {};
    let paypalButtonsRendered = false;
    const BACKEND_URL = 'http://localhost:3000/api'; // Cambia questo URL in produzione

    // Carica prodotti dal backend al primo avvio
    async function initProducts() {
      try {
        const response = await fetch(`${BACKEND_URL}/products`);
        if (!response.ok) throw new Error('Errore caricamento backend');
        
        const productsFromDB = await response.json();
        const productDivs = document.querySelectorAll('#products .product');
        
        productDivs.forEach(div => {
          const name = div.getAttribute('data-product');
          const price = parseFloat(div.getAttribute('data-price')) || 0;
          
          // Usa stock dal database se disponibile, altrimenti dal HTML
          const dbProduct = productsFromDB.find(p => p.product_name === name);
          const stock = dbProduct ? dbProduct.stock : (parseInt(div.getAttribute('data-stock'), 10) || 0);
          
          products[name] = { price, stock, element: div };
          updateStockDisplay(name);
          // attacca evento click per lightbox sull'immagine del prodotto
        const img = div.querySelector('.product-img') || div.querySelector('img');
        if (img) {
          img.style.cursor = 'zoom-in';
          img.addEventListener('click', function() {
            openLightbox(this.src, this.alt || name);
          });
        }

        // aggiungi pulsante "Mostra altro" se la descrizione Ã¨ lunga
        const desc = div.querySelector('.desc');
        if (desc) {
          const text = desc.textContent || '';
          if (text.length > 120) {
            const btn = document.createElement('button');
            btn.className = 'more-btn';
            btn.type = 'button';
            btn.textContent = 'Mostra altro';
            btn.addEventListener('click', function() { toggleDesc(this); });
            // inserisci il bottone subito dopo la descrizione
            if (desc.nextSibling) desc.parentNode.insertBefore(btn, desc.nextSibling);
            else desc.parentNode.appendChild(btn);
          }
        }
      });
    }

    function toggleDesc(btn) {
      const container = btn.parentElement;
      if (!container) return;
      const desc = container.querySelector('.desc');
      if (!desc) return;
      const expanded = desc.classList.toggle('expanded');
      btn.textContent = expanded ? 'Mostra meno' : 'Mostra altro';
    }

    // Lightbox functions
    function openLightbox(src, alt) {
      const lightbox = document.getElementById('lightbox');
      const lbImg = document.getElementById('lightbox-img');
      if (!lightbox || !lbImg) return;
      lbImg.src = src;
      lbImg.alt = alt || '';
      lightbox.classList.add('open');
      lightbox.setAttribute('aria-hidden', 'false');
    }

    function closeLightbox() {
      const lightbox = document.getElementById('lightbox');
      const lbImg = document.getElementById('lightbox-img');
      if (!lightbox || !lbImg) return;
      lightbox.classList.remove('open');
      lightbox.setAttribute('aria-hidden', 'true');
      // rimuovi src per evitare carico persistente
      lbImg.src = '';
    }

    // chiusura lightbox con click sul bottone o sullo sfondo
    document.addEventListener('click', function(e) {
      const lightbox = document.getElementById('lightbox');
      if (!lightbox) return;
      if (e.target.id === 'lightbox-close') closeLightbox();
      if (e.target === lightbox) closeLightbox();
    });

    function updateStockDisplay(name) {
      const p = products[name];
      if (!p) return;
      const div = p.element;
      const stockSpan = div.querySelector('.stock');
      const btn = div.querySelector('button.add-btn');
      if (p.stock <= 0) {
        stockSpan.textContent = 'Regalato';
        if (btn) {
          btn.disabled = true;
          btn.textContent = 'Regalato';
          btn.style.background = '#999';
          btn.style.cursor = 'default';
        }
      } else {
        stockSpan.textContent = `Disponibili: ${p.stock}`;
        if (btn) {
          btn.disabled = false;
          btn.textContent = 'Aggiungi al carrello';
          btn.style.background = '';
          btn.style.cursor = '';
        }
      }
    }

    function addToCart(product, price) {
      const p = products[product];
      if (!p || p.stock <= 0) {
        alert('Prodotto esaurito');
        updateStockDisplay(product);
        return;
      }
      const existingItem = cart.find(item => item.product === product);
      if (existingItem) {
        if (p.stock <= 0) { alert('Nessun pezzo disponibile'); return; }
        existingItem.quantity += 1;
      } else {
        cart.push({ product, price, quantity: 1 });
      }
      p.stock -= 1;
      updateStockDisplay(product);
      renderCart();
    }

    function removeFromCart(index) {
      const item = cart[index];
      if (item) {
        // ripristina lo stock
        if (products[item.product]) {
          products[item.product].stock += item.quantity;
          updateStockDisplay(item.product);
        }
        cart.splice(index, 1);
        renderCart();
      }
    }

    function changeQuantity(index, change) {
      const item = cart[index];
      if (!item) return;
      const p = products[item.product];
      if (change > 0) {
        if (p.stock <= 0) { alert('Non ci sono piÃ¹ pezzi disponibili'); return; }
        item.quantity += 1;
        p.stock -= 1;
      } else {
        item.quantity -= 1;
        p.stock += 1;
        if (item.quantity <= 0) {
          cart.splice(index, 1);
        }
      }
      updateStockDisplay(item.product);
      renderCart();
    }

    function getTotal() {
      return cart.reduce((sum, item) => sum + (item.price * item.quantity), 0);
    }

    function renderCart() {
      const cartList = document.getElementById('cart');
      cartList.innerHTML = '';

      if (cart.length === 0) {
        cartList.innerHTML = '<li style="color: #999;">Carrello vuoto</li>';
      } else {
        cart.forEach((item, index) => {
          const subtotal = (item.price * item.quantity).toFixed(2);
          const li = document.createElement('li');
          li.className = 'cart-item';
          li.innerHTML = `
            <div class="left">
              <strong>${item.product}</strong>
              <small>â‚¬${item.price} x ${item.quantity} = â‚¬${subtotal}</small>
            </div>
            <div class="controls">
              <button class="qty-btn" onclick="changeQuantity(${index}, -1)">âˆ’</button>
              <button class="qty-btn" onclick="changeQuantity(${index}, 1)">+</button>
              <button class="remove-btn" onclick="removeFromCart(${index})">ðŸ—‘</button>
            </div>
          `;
          cartList.appendChild(li);
        });
      }

      const total = getTotal().toFixed(2);
      document.getElementById('total').textContent = total;

      // Mostra/nascondi bottone PayPal
      const paypalContainer = document.getElementById('paypal-button-container');
      const paypalMark = document.getElementById('paypal-mark');
      if (cart.length > 0) {
        paypalContainer.style.display = 'block';
        if (paypalButtonsRendered) {
          paypalContainer.innerHTML = '';
          paypalButtonsRendered = false;
        }
        renderPayPalButtons();
        if (paypalMark) paypalMark.style.display = 'inline-block';
      } else {
        paypalContainer.innerHTML = '';
        paypalContainer.style.display = 'none';
        if (paypalMark) paypalMark.style.display = 'none';
      }
    }

    function renderPayPalButtons() {
      if (cart.length === 0) return;
      if (paypalButtonsRendered) return;

      paypal.Buttons({
          createOrder: function(data, actions) {
            const total = getTotal().toFixed(2);
            return actions.order.create({
              purchase_units: [{
                description: 'Lista Nascita di Beatrice',
                soft_descriptor: 'LISTA BEATRICE',
                amount: {
                  currency_code: 'EUR',
                  value: total,
                  breakdown: {
                    item_total: { currency_code: 'EUR', value: total }
                  }
                },
                items: cart.map(item => ({
                  name: item.product,
                  unit_amount: { currency_code: 'EUR', value: item.price.toFixed(2) },
                  quantity: item.quantity.toString()
                }))
              }]
            });
          },
        onApprove: function(data, actions) {
          return actions.order.capture().then(function(details) {
            const buyer = (details.payer && details.payer.name && details.payer.name.given_name) || 'Cliente';
            const amount = details.purchase_units && details.purchase_units[0] && details.purchase_units[0].amount && details.purchase_units[0].amount.value;
            const orderId = details.id;
            
            // Invia i dati dell'ordine al backend per aggiornare lo stock
            sendOrderToBackend(details);
            
            alert('Grazie ' + buyer + '! Il pagamento di â‚¬' + amount + ' Ã¨ stato completato con successo.\n\nNumero ordine: ' + orderId);
            cart = [];
            // dopo pagamento non ripristiniamo stock (sono considerati venduti/regalati)
            renderCart();
          });
        },
        onError: function(err) {
          alert('Errore nel pagamento: ' + err);
        },
        onCancel: function(data) {
          alert('Pagamento annullato.');
        }
      }).render('#paypal-button-container');

      paypalButtonsRendered = true;
    }

    // Invia ordine al backend per aggiornare lo stock
    async function sendOrderToBackend(paypalDetails) {
      try {
        const items = paypalDetails.purchase_units[0].items || [];
        const webhook = {
          event_type: 'PAYMENT.CAPTURE.COMPLETED',
          resource: {
            id: paypalDetails.id,
            purchase_units: [{
              items: items
            }]
          }
        };
        
        const response = await fetch(`${BACKEND_URL}/paypal-webhook`, {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify(webhook)
        });
        
        if (response.ok) {
          console.log('âœ“ Ordine registrato e stock aggiornato');
        } else {
          console.error('Errore aggiornamento stock sul backend');
        }
      } catch (error) {
        console.error('Errore comunicazione con backend:', error);
      }
    }

    document.addEventListener('DOMContentLoaded', function() {
      initProducts();
      renderCart();
    });
  </script>
</body>
</html>

  